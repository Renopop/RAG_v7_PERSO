================================================================================
                    R√âPONSES AUX QUESTIONS TECHNIQUES RAG
                              Version 2.1 - 01/12/2025
================================================================================


1. LOST IN THE MIDDLE - AFFICHAGE VS CONTEXTE LLM
================================================================================

CORRIG√â - Le r√©ordonnancement "Lost in the Middle" est maintenant appliqu√©
UNIQUEMENT au contexte envoy√© au LLM, pas √† l'affichage des r√©sultats.

+---------------------------+--------------------------------------------------+
| √âl√©ment                   | Ordre                                            |
+---------------------------+--------------------------------------------------+
| Affichage utilisateur     | Ordre original par pertinence (1, 2, 3, 4...)    |
| Contexte LLM              | R√©ordonn√© (1, 3, 5... 6, 4, 2) pour √©viter       |
|                           | le "lost in middle"                              |
+---------------------------+--------------------------------------------------+

L'objectif premier du RAG (trouver le bon document et r√©pertoire associ√©)
est pr√©serv√© gr√¢ce √† l'affichage par ordre de pertinence.


2. DICTIONNAIRE TECHNIQUE (~750 TERMES)
================================================================================

Traitement : LISTE PYTHON HARDCOD√âE (ni mini RAG, ni SQL, ni prompt externe)

Fichier : chunking/chunking.py
Code    : TECHNICAL_INDICATORS = {"shall", "must", "fatigue", "fuselage", ...}

+------------------------+-----------------------------------------------------+
| Usage                  | Description                                         |
+------------------------+-----------------------------------------------------+
| Analyse de densit√©     | Compte les termes techniques ‚Üí adapte la taille     |
|                        | des chunks (800-2000 caract√®res)                    |
| Extraction keywords    | Bonus scoring √ó2 pour les termes du dictionnaire    |
+------------------------+-----------------------------------------------------+

Ce n'est PAS un RAG s√©par√© : c'est un simple matching de mots utilis√©
pendant l'ingestion et l'analyse des requ√™tes.


3. CACHE S√âMANTIQUE POUR REQU√äTES
================================================================================

Le cache n'est PAS sur un serveur - il est LOCAL √† chaque instance Streamlit.

+------------------------+-----------------------------------------------------+
| Param√®tre              | Valeur                                              |
+------------------------+-----------------------------------------------------+
| Stockage               | Fichier local "semantic_cache.json"                 |
| Seuil similarit√©       | 95% (cosine similarity des embeddings question)     |
| TTL                    | 1 heure                                             |
| Max entr√©es            | 1000 requ√™tes                                       |
+------------------------+-----------------------------------------------------+

Fonctionnement : Si une question est similaire √† 95%+ √† une question d√©j√†
pos√©e, la r√©ponse cach√©e est retourn√©e imm√©diatement sans appel LLM.


4. CACHE LOCAL DES BASES FAISS (T√âL√âTRAVAIL)
================================================================================

+------------------------+-----------------------------------------------------+
| Question               | R√©ponse                                             |
+------------------------+-----------------------------------------------------+
| O√π stock√© ?            | ~/.cache/ragme_up/ (Linux/Mac)                      |
|                        | %TEMP%\faiss_local_cache (Windows)                  |
| Dur√©e ?                | PAS DE TTL FIXE - valid√© par hash √† chaque requ√™te  |
| Max bases ?            | PAS DE LIMITE - uniquement limit√© par espace disque |
| Invalidation ?         | Automatique si le hash de la base r√©seau change     |
+------------------------+-----------------------------------------------------+

Structure du cache :

    ~/.cache/ragme_up/
    ‚îî‚îÄ‚îÄ [hash_collection]/
        ‚îú‚îÄ‚îÄ index.faiss      # Index vectoriel local
        ‚îú‚îÄ‚îÄ metadata.json    # M√©tadonn√©es des chunks
        ‚îî‚îÄ‚îÄ .hash            # Hash de validation

Le cache est particuli√®rement utile pour le t√©l√©travail :
- La premi√®re requ√™te copie la base en local (~quelques secondes)
- Les requ√™tes suivantes sont quasi-instantan√©es (pas d'acc√®s r√©seau)
- Si la base r√©seau change, un avertissement s'affiche et le cache
  peut √™tre mis √† jour via le bouton "üì• Copier local"


================================================================================
                              FIN DU DOCUMENT
================================================================================
