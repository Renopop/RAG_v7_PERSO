# Systeme RAG avec FAISS et Streamlit
# =====================================

# Interface web Streamlit
streamlit>=1.28.0

# Interface GUI pour creation de CSV (CustomTkinter)
customtkinter>=5.2.0

# Base de donnees vectorielle - FAISS
faiss-cpu>=1.7.4
# Note: utilisez faiss-gpu si vous avez un GPU CUDA disponible

# Traitement de documents
pdfminer.six>=20221105
pymupdf>=1.24.0  # Fallback pour extraction PDF robuste
pdfplumber>=0.10.0  # Extraction amelioree des tableaux PDF
python-docx>=0.8.11
python-pptx>=0.6.21  # Traitement fichiers PowerPoint (.pptx)
pywin32>=306; sys_platform == "win32"  # Conversion .doc -> .docx via Microsoft Word
Pillow>=10.0.0  # Traitement images pour OCR

# Traitement de texte
langdetect>=1.0.9
unidecode>=1.3.6
chardet>=5.1.0
beautifulsoup4>=4.12.0  # Parsing HTML (Confluence)

# API et modeles (Snowflake Arctic + DALLEM)
openai>=1.0.0
httpx>=0.24.0
requests>=2.31.0  # Fallback pour appels HTTP

# Utilitaires
numpy>=1.24.0
packaging>=23.0
psutil>=5.9.0  # Detection RAM pour auto-configuration memoire
tqdm>=4.65.0  # Barres de progression

# =====================================
# MODE OFFLINE - Dependencies optionnelles
# =====================================
# Ces packages sont necessaires uniquement pour le mode offline
# Installez-les avec: pip install -r requirements-offline.txt

# PyTorch avec support CUDA (installer separement selon votre GPU)
# IMPORTANT: torch>=2.6.0 requis pour corriger CVE-2025-32434
# Voir: https://pytorch.org/get-started/locally/
# Pour CUDA 12.1: pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
# Pour CUDA 12.4: pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu124
# Pour CPU only:  pip install torch torchvision torchaudio

# Transformers et modeles locaux
transformers>=4.40.0  # Version min pour XLMRobertaModel et BGE-M3
accelerate>=0.24.0
sentencepiece>=0.1.99
safetensors>=0.4.0
tokenizers>=0.14.0

# Quantification pour GPU avec VRAM limitee (optionnel)
# bitsandbytes>=0.41.0  # Decommenter si vous voulez la quantification 4-bit/8-bit

# Scipy pour calculs scientifiques
scipy>=1.11.0
